Building configuration...

  
Current configuration : 5418 bytes
!
version 15.7
service timestamps debug datetime msec
service timestamps log datetime msec
no service password-encryption
!
hostname C1
!
boot-start-marker
boot-end-marker
!
!
!
no aaa new-model
!
!
!
mmi polling-interval 60
no mmi auto-configure
no mmi pvc
mmi snmp-timeout 180
!
!
!
!
!
no ip icmp rate-limit unreachable
!
!
!
!
!
!
!
!
!
!


!
ip vrf ISP1_PEERING
 rd 65001:10
 route-target export 65001:10
 route-target import 65001:10
 route-target import 65001:200
 route-target import 65001:300
 route-target import 65001:400
 route-target import 65001:100
 route-target import 65001:50
!
!
!
!
no ip domain lookup
ip domain name test.test
ip cef
no ipv6 cef
!
multilink bundle-name authenticated
mpls label protocol ldp
!
!
!
!
!
!
!
!
!
username Samuel privilege 15 secret 5 $1$etvu$hrE6d2DmXH/CYUS7UtE0n.
!
redundancy
!
no cdp log mismatch duplex
!
ip tcp synwait-time 5
! 
!
!
!
!
!
!
!
!
!
!
!
!
interface Loopback0
 description Router-ID for IGP and BGP
 ip address 10.0.1.1 255.255.255.255
 ip router isis ISP
!
interface Loopback100
 description Testing
 no ip address
!
interface Ethernet0/0
 description P2P Link to C2
 ip address 172.16.101.0 255.255.255.254
 ip router isis ISP
 duplex auto
 mpls ip
 isis circuit-type level-2-only
 isis network point-to-point 
!
interface Ethernet0/1
 description P2P Link to D1
 ip address 172.16.101.2 255.255.255.254
 ip router isis ISP
 duplex auto
 mpls ip
 isis circuit-type level-2-only
 isis network point-to-point 
!
interface Ethernet0/2
 description P2P Link to D2
 ip address 172.16.101.4 255.255.255.254
 ip router isis ISP
 duplex auto
 mpls ip
 isis circuit-type level-2-only
 isis network point-to-point 
!
interface Ethernet0/3
 description P2P Link to D3
 ip address 172.16.101.6 255.255.255.254
 ip router isis ISP
 duplex auto
 mpls ip
 isis circuit-type level-2-only
 isis network point-to-point 
!
interface Ethernet1/0
 description P2P Link to D4
 ip address 172.16.101.8 255.255.255.254
 ip router isis ISP
 duplex auto
 mpls ip
 isis circuit-type level-2-only
 isis network point-to-point 
!
interface Ethernet1/1
 ip address dhcp
 duplex auto
!
interface Ethernet1/2
 description P2P Link to ISP1-R1
 ip vrf forwarding ISP1_PEERING
 ip address 172.16.102.1 255.255.255.254
 duplex auto
!
interface Ethernet1/3
 description P2P Link to ISP1-R2
 ip vrf forwarding ISP1_PEERING
 ip address 172.16.102.5 255.255.255.254
 duplex auto
!
router isis ISP
 net 49.0000.0000.0000.0001.00
 is-type level-2-only
 metric-style wide
 log-adjacency-changes
 default-information originate
!
router bgp 65001
 bgp router-id 10.0.1.1
 bgp log-neighbor-changes
 no bgp default ipv4-unicast
 neighbor 10.0.1.2 remote-as 65001
 neighbor 10.0.1.2 update-source Loopback0
 neighbor 10.0.1.101 remote-as 65001
 neighbor 10.0.1.101 update-source Loopback0
 neighbor 10.0.1.102 remote-as 65001
 neighbor 10.0.1.102 update-source Loopback0
 neighbor 10.0.1.201 remote-as 65001
 neighbor 10.0.1.201 update-source Loopback0
 neighbor 10.0.1.202 remote-as 65001
 neighbor 10.0.1.202 update-source Loopback0
 !
 address-family vpnv4
  neighbor 10.0.1.2 activate
  neighbor 10.0.1.2 send-community extended
  neighbor 10.0.1.2 route-map PREFER_C1 out
  neighbor 10.0.1.101 activate
  neighbor 10.0.1.101 send-community extended
  neighbor 10.0.1.101 route-reflector-client
  neighbor 10.0.1.101 route-map PREFER_C1 out
  neighbor 10.0.1.102 activate
  neighbor 10.0.1.102 send-community extended
  neighbor 10.0.1.102 route-reflector-client
  neighbor 10.0.1.102 route-map PREFER_C1 out
  neighbor 10.0.1.201 activate
  neighbor 10.0.1.201 send-community extended
  neighbor 10.0.1.201 route-reflector-client
  neighbor 10.0.1.201 route-map PREFER_C1 out
  neighbor 10.0.1.202 activate
  neighbor 10.0.1.202 send-community extended
  neighbor 10.0.1.202 route-reflector-client
  neighbor 10.0.1.202 route-map PREFER_C1 out
 exit-address-family
 !
 address-family ipv4 vrf ISP1_PEERING
  neighbor 172.16.102.0 remote-as 65000
  neighbor 172.16.102.0 activate
  neighbor 172.16.102.4 remote-as 65000
  neighbor 172.16.102.4 activate
 exit-address-family
!
ip forward-protocol nd
!
!
no ip http server
no ip http secure-server
ip route 0.0.0.0 0.0.0.0 192.168.2.2
!
!
ip prefix-list FILTER_WAREHOUSE seq 5 permit 20.0.0.19/32
!
ip prefix-list INTERNET seq 5 permit 0.0.0.0/0
!
ip prefix-list ISP1_ACCEPTED_PREFIXES seq 5 permit 10.10.10.0/24
ip prefix-list ISP1_ACCEPTED_PREFIXES seq 10 permit 10.10.20.0/24
ip prefix-list ISP1_ACCEPTED_PREFIXES seq 15 permit 10.10.30.0/24
ip prefix-list ISP1_ACCEPTED_PREFIXES seq 20 permit 203.0.0.1/32
ip prefix-list ISP1_ACCEPTED_PREFIXES seq 25 permit 0.0.0.0/0
ipv6 ioam timestamp
!
route-map DENY_WAREHOUSE deny 0
 match ip address prefix-list FILTER_WAREHOUSE
!
route-map DENY_WAREHOUSE permit 1
!
route-map INTERNET permit 0
 match ip address prefix-list INTERNET
!
route-map PREFER_C1 permit 0
 set local-preference 200
!
route-map DENY_SATELLITES deny 0
 match ip address prefix-list FILTER_SATELLITES
!
route-map FILTER_FROM_ISP1 permit 0
 match ip address prefix-list ISP1_ACCEPTED_PREFIXES
!
!
mpls ldp router-id Loopback0 force
!
control-plane
!
!
!
!
!
!
!
!
line con 0
 exec-timeout 0 0
 privilege level 15
 logging synchronous
line aux 0
 exec-timeout 0 0
 privilege level 15
 logging synchronous
line vty 0 4
 exec-timeout 0 0
 login local
 transport input ssh
!
ntp server 34.202.215.187
ntp server pool.ntp.org
!
end
