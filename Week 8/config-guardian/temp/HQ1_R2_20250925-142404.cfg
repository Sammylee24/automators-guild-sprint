Building configuration...

  
Current configuration : 7689 bytes
!
! Last configuration change at 13:14:19 UTC Thu Sep 25 2025
!
version 15.7
service timestamps debug datetime msec
service timestamps log datetime msec
no service password-encryption
!
hostname HQ1_R2
!
boot-start-marker
boot-end-marker
!
!
!
no aaa new-model
!
!
!
mmi polling-interval 60
no mmi auto-configure
no mmi pvc
mmi snmp-timeout 180
!
!
!
!
!
no ip icmp rate-limit unreachable
!
!
!
!
!
!
!
!
!
!


!
!
!
!
no ip domain lookup
ip domain name test.test
ip cef
no ipv6 cef
!
multilink bundle-name authenticated
!
!
!
!
!
!
!
!
!
username Samuel privilege 15 secret 5 $1$bq5G$v.GwQEmz2.rysNqsOLfVk/
!
redundancy
!
no cdp log mismatch duplex
!
ip tcp synwait-time 5
! 
!
!
!
!
!
!
!
!
!
!
!
!
interface Loopback0
 description Management
 ip address 20.0.0.2 255.255.255.255
 ip ospf 1 area 0
!
interface Ethernet0/0
 description To HQ R1
 ip address 10.160.1.5 255.255.255.254
 ip ospf 1 area 0
 duplex auto
!
interface Ethernet0/1
 description To R4
 ip address 172.16.100.14 255.255.255.252
 ip virtual-reassembly in
 duplex auto
!
interface Ethernet0/2
 description To R3
 ip address 172.16.100.6 255.255.255.252
 ip virtual-reassembly in
 duplex auto
!
interface Ethernet0/3
 description To Core SW
 ip address 10.160.1.3 255.255.255.254
 ip ospf 1 area 0
 duplex auto
!
router ospf 1
 router-id 20.0.0.2
 default-information originate metric 250 route-map OUT
!
router bgp 100
 bgp router-id 20.0.0.2
 bgp log-neighbor-changes
 network 10.10.10.0 mask 255.255.255.0
 network 10.10.20.0 mask 255.255.255.0
 network 20.0.0.1 mask 255.255.255.255
 network 20.0.0.2 mask 255.255.255.255
 network 20.0.0.4 mask 255.255.255.252
 network 20.0.0.8 mask 255.255.255.255
 network 20.0.0.16 mask 255.255.255.255
 network 20.0.0.17 mask 255.255.255.255
 network 20.0.8.1 mask 255.255.255.255
 network 20.0.8.2 mask 255.255.255.255
 network 20.0.8.3 mask 255.255.255.255
 network 20.0.8.4 mask 255.255.255.255
 network 20.0.8.5 mask 255.255.255.255
 network 20.0.8.6 mask 255.255.255.255
 network 20.0.8.7 mask 255.255.255.255
 network 20.0.8.8 mask 255.255.255.255
 network 20.0.8.9 mask 255.255.255.255
 network 20.0.8.10 mask 255.255.255.255
 network 20.0.8.11 mask 255.255.255.255
 network 20.0.8.12 mask 255.255.255.255
 network 20.0.8.13 mask 255.255.255.255
 network 20.0.8.14 mask 255.255.255.255
 network 20.0.8.15 mask 255.255.255.255
 network 20.0.8.16 mask 255.255.255.255
 network 20.0.8.17 mask 255.255.255.255
 network 20.0.8.18 mask 255.255.255.255
 network 20.0.8.19 mask 255.255.255.255
 network 20.0.8.20 mask 255.255.255.255
 network 20.0.8.21 mask 255.255.255.255
 network 20.0.8.22 mask 255.255.255.255
 network 20.0.8.23 mask 255.255.255.255
 network 20.0.8.24 mask 255.255.255.255
 network 20.0.8.25 mask 255.255.255.255
 network 20.0.8.26 mask 255.255.255.255
 network 20.0.8.27 mask 255.255.255.255
 network 20.0.8.28 mask 255.255.255.255
 network 20.0.8.29 mask 255.255.255.255
 network 20.0.8.30 mask 255.255.255.255
 network 20.0.9.2 mask 255.255.255.255
 network 20.0.9.3 mask 255.255.255.255
 network 20.0.9.4 mask 255.255.255.255
 network 20.0.9.5 mask 255.255.255.255
 network 20.0.9.6 mask 255.255.255.255
 network 20.0.9.7 mask 255.255.255.255
 network 20.0.9.8 mask 255.255.255.255
 network 20.0.9.9 mask 255.255.255.255
 network 20.0.9.10 mask 255.255.255.255
 network 20.0.9.11 mask 255.255.255.255
 network 20.0.9.12 mask 255.255.255.255
 network 20.0.9.13 mask 255.255.255.255
 network 20.0.9.14 mask 255.255.255.255
 network 20.0.9.15 mask 255.255.255.255
 network 20.0.9.16 mask 255.255.255.255
 network 20.0.9.17 mask 255.255.255.255
 network 20.0.9.18 mask 255.255.255.255
 network 20.0.9.19 mask 255.255.255.255
 network 20.0.9.20 mask 255.255.255.255
 network 20.0.9.21 mask 255.255.255.255
 network 20.0.9.22 mask 255.255.255.255
 network 20.0.9.23 mask 255.255.255.255
 network 20.0.9.24 mask 255.255.255.255
 network 20.0.9.25 mask 255.255.255.255
 network 20.0.9.26 mask 255.255.255.255
 network 20.0.9.27 mask 255.255.255.255
 network 20.0.9.28 mask 255.255.255.255
 network 20.0.9.29 mask 255.255.255.255
 network 20.0.9.30 mask 255.255.255.255
 network 20.0.10.2 mask 255.255.255.255
 network 20.0.10.3 mask 255.255.255.255
 network 20.0.10.4 mask 255.255.255.255
 network 20.0.10.5 mask 255.255.255.255
 network 20.0.10.6 mask 255.255.255.255
 network 20.0.10.7 mask 255.255.255.255
 network 20.0.10.8 mask 255.255.255.255
 network 20.0.10.9 mask 255.255.255.255
 network 20.0.10.10 mask 255.255.255.255
 network 20.0.10.11 mask 255.255.255.255
 network 20.0.10.12 mask 255.255.255.255
 network 20.0.10.13 mask 255.255.255.255
 network 20.0.10.14 mask 255.255.255.255
 network 20.0.10.15 mask 255.255.255.255
 network 20.0.10.16 mask 255.255.255.255
 network 20.0.10.17 mask 255.255.255.255
 network 20.0.10.18 mask 255.255.255.255
 network 20.0.10.19 mask 255.255.255.255
 network 20.0.10.20 mask 255.255.255.255
 network 20.0.10.21 mask 255.255.255.255
 network 20.0.10.22 mask 255.255.255.255
 network 20.0.10.23 mask 255.255.255.255
 network 20.0.10.24 mask 255.255.255.255
 network 20.0.10.25 mask 255.255.255.255
 network 20.0.10.26 mask 255.255.255.255
 network 20.0.10.27 mask 255.255.255.255
 network 20.0.10.28 mask 255.255.255.255
 network 20.0.10.29 mask 255.255.255.255
 network 20.0.10.30 mask 255.255.255.255
 network 20.0.16.2 mask 255.255.255.255
 network 20.0.16.3 mask 255.255.255.255
 network 20.0.16.4 mask 255.255.255.255
 network 20.0.16.5 mask 255.255.255.255
 network 20.0.16.6 mask 255.255.255.255
 network 20.0.16.7 mask 255.255.255.255
 network 20.0.16.8 mask 255.255.255.255
 network 20.0.16.9 mask 255.255.255.255
 network 20.0.16.10 mask 255.255.255.255
 network 20.0.16.11 mask 255.255.255.255
 network 20.0.16.12 mask 255.255.255.255
 network 20.0.16.13 mask 255.255.255.255
 network 20.0.16.14 mask 255.255.255.255
 network 20.0.16.15 mask 255.255.255.255
 network 20.0.16.16 mask 255.255.255.255
 network 20.0.16.17 mask 255.255.255.255
 network 20.0.16.18 mask 255.255.255.255
 network 20.0.16.19 mask 255.255.255.255
 network 20.0.16.20 mask 255.255.255.255
 network 20.0.16.21 mask 255.255.255.255
 network 20.0.16.22 mask 255.255.255.255
 network 20.0.16.23 mask 255.255.255.255
 network 20.0.16.24 mask 255.255.255.255
 network 20.0.16.25 mask 255.255.255.255
 network 20.0.16.26 mask 255.255.255.255
 network 20.0.16.27 mask 255.255.255.255
 network 20.0.16.28 mask 255.255.255.255
 network 20.0.16.29 mask 255.255.255.255
 network 20.0.16.30 mask 255.255.255.255
 aggregate-address 20.0.16.0 255.255.255.224 summary-only
 aggregate-address 20.0.10.0 255.255.255.224 summary-only
 aggregate-address 20.0.9.0 255.255.255.224 summary-only
 aggregate-address 20.0.8.0 255.255.255.224 summary-only
 neighbor 10.0.0.3 remote-as 65000
 neighbor 10.0.0.3 ebgp-multihop 5
 neighbor 10.0.0.3 update-source Loopback0
 neighbor 10.0.0.3 route-map PROHIBIT_R2 out
 neighbor 10.0.0.4 remote-as 65000
 neighbor 10.0.0.4 ebgp-multihop 5
 neighbor 10.0.0.4 update-source Loopback0
 neighbor 10.0.0.4 route-map PROHIBIT_R2 out
 neighbor 20.0.0.1 remote-as 100
 neighbor 20.0.0.1 update-source Loopback0
!
ip forward-protocol nd
!
!
no ip http server
no ip http secure-server
ip route 10.0.0.3 255.255.255.255 172.16.100.5
ip route 10.0.0.4 255.255.255.255 172.16.100.13
!
!
ip prefix-list OUT seq 5 permit 0.0.0.0/0
ipv6 ioam timestamp
!
route-map PROHIBIT_R2 permit 0
 set as-path prepend 100 100 100
!
route-map OUT permit 0
 match ip address prefix-list OUT
!
!
!
control-plane
!
!
!
!
!
!
!
!
line con 0
 exec-timeout 0 0
 privilege level 15
 logging synchronous
line aux 0
 exec-timeout 0 0
 privilege level 15
 logging synchronous
line vty 0 4
 exec-timeout 0 0
 login local
 transport input ssh
!
!
end
